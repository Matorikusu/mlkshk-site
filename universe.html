<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MLKSHK — The Universe</title>
<link rel="icon" href="images/LOGO_SMALL.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700&family=Rajdhani:wght@500;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000;
  --text:#f5f5f5;
  --muted:#c0c0c0;
  --accent:#ff2aa1;
  --glow:rgba(255,42,161,0.5);
  --card-radius:12px;
  --signal-green:#0f0;
  --signal-yellow:#ff0;
  --signal-red:#f00;
}
html,body{
  margin:0;
  padding:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Rajdhani',system-ui,-apple-system,Arial;
  overflow-x:hidden;
}
a{color:inherit;text-decoration:none}

/* NAV */
header.nav-bar{
  border-bottom:1px solid rgba(255,42,161,0.04);
  padding:18px 24px;
  background:linear-gradient(180deg,rgba(0,0,0,0.6),transparent);
  position:sticky;
  top:0;
  z-index:200;
  backdrop-filter:blur(6px);
}
.nav-content{
  display:flex;
  align-items:center;
  justify-content:space-between;
  max-width:1200px;
  margin:0 auto;
}
.logo-link img{height:42px;display:block;cursor:pointer}
.nav-dropdown{position:relative}
.nav-toggle{
  background:none;
  border:0;
  color:var(--muted);
  font-weight:600;
  cursor:pointer;
}
.dropdown-menu{
  display:none;
  position:absolute;
  top:calc(100% + 8px);
  right:0;
  left:auto;
  background:#000;
  border:1px solid var(--accent);
  border-radius:8px;
  min-width:200px;
  z-index:300;
  overflow:hidden;
  max-width:90vw;
}
.dropdown-menu a{
  display:block;
  padding:10px 14px;
  color:#fff;
  text-decoration:none;
}
.dropdown-menu a:hover{
  background:var(--accent);
  color:#000;
}
.nav-dropdown:hover .dropdown-menu,
.nav-dropdown:focus-within .dropdown-menu{display:block}

/* SIGNAL METERS — bottom corners */
.signal-meter {
  position: fixed;
  bottom: 90px;
  z-index: 199;
  background: rgba(0,0,0,0.75);
  border: 1px dashed var(--signal-green);
  border-radius: 6px;
  padding: 10px 14px;
  font-family: monospace;
  font-size: 13px;
  color: var(--signal-green);
  box-shadow: 0 0 12px rgba(0,255,0,0.15);
  backdrop-filter: blur(4px);
  min-width: 160px;
  text-align: left;
  transition: all 0.4s ease;
}
#signalStrengthMeter { left: 15px; }
#interferenceMeter { right: 15px; }
.signal-meter.weak { color: var(--signal-yellow); border-color: var(--signal-yellow); box-shadow: 0 0 12px rgba(255,255,0,0.25); }
.signal-meter.critical { color: var(--signal-red); border-color: var(--signal-red); box-shadow: 0 0 15px rgba(255,0,0,0.35); animation: pulse 1.5s infinite; }
.signal-meter strong { color: #fff; }
.signal-meter .bar-container {
  display: inline-block;
  width: 60px;
  height: 6px;
  background: #111;
  border: 1px dashed var(--signal-green);
  border-radius: 3px;
  margin-left: 6px;
  vertical-align: middle;
}
.signal-meter .bar {
  height: 100%;
  background: var(--signal-green);
  border-radius: 2px;
  transition: width 0.4s ease, background 0.4s ease;
}
@keyframes pulse {
  0%,100% { opacity:1; }
  50% { opacity:0.7; }
}

/* JAM BUTTON – in content flow */
.jam-section {
  text-align: center;
  margin: 80px auto;
  max-width: 800px;
}
#jam-button {
  background: #800;
  color: #f00;
  border: 2px solid #f00;
  border-radius: 8px;
  padding: 16px 40px;
  font-family: 'Orbitron', sans-serif;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 0 25px rgba(255,0,0,0.5);
  transition: all 0.3s;
}
#jam-button:hover {
  background: #a00;
  box-shadow: 0 0 40px rgba(255,0,0,0.7);
  transform: scale(1.05);
}

/* JAM OVERLAY – full-screen tiled static, centered text */
#jam-overlay {
  position: fixed;
  inset: 0;
  background: url('Player/static1.png') repeat #000;
  z-index: 300;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s;
  display: flex;
  align-items: center;
  justify-content: center;
}
#jam-text {
  font-family: 'Orbitron', sans-serif;
  font-size: 100px;
  color: #f00;
  text-shadow: 0 0 50px #f00;
  text-align: center;
  opacity: 0;
  transition: opacity 0.5s;
  pointer-events: none;
}

/* TRANSMISSION NEWS – static, cycling like signal bleed */
.transmission-news {
  margin: 60px auto;
  max-width: 800px;
  padding: 20px;
  background: rgba(0,0,0,0.6);
  border: 1px dashed var(--signal-green);
  border-radius: 8px;
  font-family: monospace;
  font-size: 14px;
  color: #0f0;
  text-align: center;
  opacity: 0.7;
}
.transmission-news p {
  margin: 8px 0;
  text-shadow: 0 0 4px #0f0;
}

/* PHASE MODULATOR ARTIFACT – clickable image above stocks */
.phase-artifact {
  margin: 60px auto;
  max-width: 600px;
  text-align: center;
}
.phase-artifact a {
  display: block;
  transition: all 0.3s;
}
.phase-artifact img {
  width: 100%;
  border: 2px dashed var(--signal-green);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,255,0,0.3);
  transition: all 0.3s;
}
.phase-artifact a:hover img {
  transform: scale(1.03);
  box-shadow: 0 0 35px rgba(0,255,0,0.5);
}
.phase-artifact p {
  margin-top: 12px;
  color: #0f0;
  font-family: monospace;
  font-size: 14px;
}

/* MLK 500 STOCK INDEX – Coinbase-style list at bottom */
.mlk500-section {
  margin: 80px auto;
  max-width: 1000px;
  padding: 20px;
  background: rgba(0,0,0,0.7);
  border: 1px dashed #0f0;
  border-radius: 8px;
  font-family: monospace;
  color: #0f0;
}
.mlk500-section h2 img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 0 auto 20px;
  border: 1px dashed #0f0;
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0,255,0,0.3);
}
.stock-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.stock-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: rgba(0,255,0,0.05);
  border: 1px solid rgba(0,255,0,0.2);
  border-radius: 6px;
  transition: all 0.3s;
}
.stock-item:hover {
  background: rgba(0,255,0,0.1);
  box-shadow: 0 0 15px rgba(0,255,0,0.2);
}
.stock-left {
  flex: 1;
}
.stock-symbol {
  font-size: 18px;
  font-weight: bold;
}
.stock-name {
  font-size: 13px;
  color: #aaa;
}
.stock-right {
  text-align: right;
  min-width: 120px;
}
.stock-price {
  font-size: 18px;
  font-weight: bold;
}
.stock-change {
  font-size: 14px;
}
.positive { color: #0f0; }
.negative { color: #f00; }

/* INVEST BUTTON */
.invest-section {
  text-align: center;
  margin: 60px auto 40px;
  max-width: 800px;
}
#invest-button {
  background: #222;
  color: #0f0;
  border: 1px solid #0f0;
  border-radius: 8px;
  padding: 14px 32px;
  font-family: 'Orbitron', sans-serif;
  font-size: 18px;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(0,255,0,0.3);
  transition: all 0.3s;
}
#invest-button:hover {
  background: #0f0;
  color: #000;
  box-shadow: 0 0 25px rgba(0,255,0,0.6);
}
#invest-message {
  margin-top: 20px;
  font-size: 16px;
  color: #0f0;
  opacity: 0;
  transition: opacity 0.5s;
}

/* HERO */
.hero-link{
  display:block;
  max-width:1000px;
  margin:40px auto;
}
.hero{
  width:100%;
  aspect-ratio: 2.38 / 1;
  background:url('images/Home/UNIVERSE_HEADER2.png') center/cover no-repeat;
  cursor:pointer;
  transition:transform .35s ease,filter .35s ease,box-shadow .35s ease;
}
.hero-link:hover .hero{
  transform:scale(1.02);
  filter:brightness(1.15);
  box-shadow:0 0 40px var(--glow);
}

/* MAIN CONTENT */
.wrap{
  max-width:1200px;
  margin:0 auto;
  padding:40px 20px;
  position:relative;
  z-index:1;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:24px;
}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));
  border:1px solid rgba(255,42,161,0.15);
  border-radius:var(--card-radius);
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.6);
  transition:.3s;
  aspect-ratio: 1 / 1.4;
}
.card:hover{
  transform:translateY(-8px);
  box-shadow:0 20px 50px rgba(0,0,0,.8);
  border-color:var(--accent);
}
.card .art{
  height:0;
  padding-top:75%;
  position:relative;
  overflow:hidden;
}
.card .art img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:brightness(0.85) contrast(1.1);
  transition:.4s;
}
.card:hover .art img{
  filter:brightness(1.05) contrast(1.2);
}
.card .meta{
  padding:14px;
  text-align:center;
}
.card .title{
  font-family:'Orbitron',sans-serif;
  font-size:18px;
  margin-bottom:6px;
  color:var(--accent);
}
.card .sub{
  font-size:13px;
  color:var(--muted);
}

/* CYCLING AD BANNER */
.ad-banner {
  margin:60px auto;
  max-width:700px;
  text-align:center;
}
.ad-banner h2 {
  font-family:'Orbitron',sans-serif;
  color:var(--accent);
  margin-bottom:16px;
  font-size:1.6rem;
  opacity:0.7;
}
#adImage img {
  width:100%;
  height:auto;
  max-height:350px;
  object-fit:contain;
  border:2px dashed var(--accent);
  border-radius:12px;
  box-shadow:0 0 20px var(--glow);
  transition:opacity 0.8s ease;
}

/* TRANSMISSION LOG */
.trans-log{
  margin:60px auto;
  max-width:800px;
  padding:20px;
  background:rgba(0,0,0,0.6);
  border:1px dashed var(--accent);
  border-radius:8px;
  font-family:monospace;
  font-size:14px;
  color:#0f0;
  text-align:center;
  opacity:0.7;
}

/* SIGNAL BLEED NOTE */
.signal-bleed{
  margin:80px auto 40px;
  max-width:800px;
  padding:20px;
  text-align:center;
  color:var(--accent);
  font-family:monospace;
  font-size:14px;
  opacity:0.6;
  border-top:1px dashed var(--accent);
  border-bottom:1px dashed var(--accent);
}

/* CRT OVERLAY */
.crt-overlay{
  position:fixed;
  inset:0;
  pointer-events:none;
  background:repeating-linear-gradient(transparent 0%, transparent 2px, rgba(0,0,0,0.08) 2%, rgba(0,0,0,0.08) 4%);
  animation:scanline 10s linear infinite;
  opacity:0.15;
  z-index:10;
}
@keyframes scanline{
  0%{transform:translateY(-100%);}
  100%{transform:translateY(100%);}
}

/* FLOATING PLAYER */
#floating-player{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  width:360px;
  height:72px;
  background:url('Player/PLAYER.png') center/cover no-repeat;
  border-radius:20px;
  display:flex;
  align-items:center;
  padding:0 18px;
  box-shadow:0 12px 40px rgba(0,0,0,.85);
  z-index:999;
}
.player-meta{flex:1;display:flex;flex-direction:column;justify-content:center;text-align:center;padding:0 12px;}
.player-title{font-weight:700;font-size:14px;}
.player-artist{font-size:12px;color:var(--muted);}
.player-status{font-size:11px;color:var(--muted);margin-top:4px;}
.player-controls{display:flex;align-items:center;justify-content:center;margin-left:12px;}
.player-controls img{width:42px;height:42px;cursor:pointer;}

/* FOOTER */
footer{
  padding:28px 20px;
  text-align:center;
  font-size:13px;
  color:var(--muted);
  border-top:1px solid rgba(255,42,161,.05);
}

/* MOBILE */
@media (max-width:768px){
  .hero-link,.wrap{margin:20px auto;}
  .hero{height:auto;aspect-ratio:2.38 / 1;}
  .grid{gap:20px;}
  .card .art{padding-top:75%;}
  #floating-player{width:90%;height:60px;padding:0 12px;}
  .player-title{font-size:12px;}
  .player-artist,.player-status{font-size:10px;}
  .player-controls img{width:36px;height:36px;}
  .nav-dropdown .dropdown-menu{right:0;left:auto;min-width:160px;max-width:90vw;}
  .ad-banner{max-width:100%;margin:40px 15px;}
  #adImage img{max-height:240px;}
  .signal-meter {
    font-size: 12px;
    padding: 8px 12px;
    min-width: 140px;
    bottom: 80px;
  }
  #signalStrengthMeter { left: 10px; }
  #interferenceMeter { right: 10px; }
  #jam-button {
    padding: 14px 30px;
    font-size: 18px;
  }
  .mlk500-section h2 img { max-height: 120px; }
  .stock-item { flex-direction: column; text-align: center; gap: 8px; }
  .stock-right { text-align: center; min-width: auto; }
}
</style>
</head>
<body>

<header class="nav-bar">
  <div class="nav-content">
    <a href="index.html" class="logo-link">
      <img src="images/MLKSHK_LOGO_1500_X_500.png" alt="MLKSHK">
    </a>
    <div class="nav-dropdown">
      <button class="nav-toggle">Menu</button>
      <div class="dropdown-menu">
        <a href="index.html">Home</a>
        <a href="access.html">Access</a>
        <a href="archive.html">Archive</a>
        <a href="pirateradio.html">Pirate Radio</a>
        <a href="lab.html">The Lab</a>
      </div>
    </div>
  </div>
</header>

<!-- SIGNAL STRENGTH – bottom-left -->
<div class="signal-meter" id="signalStrengthMeter">
  <strong>Signal:</strong> <span id="signalStrength">89%</span>
  <div class="bar-container">
    <div id="strengthBar" class="bar" style="width:89%;"></div>
  </div>
</div>

<!-- INTERFERENCE LEVEL – bottom-right -->
<div class="signal-meter" id="interferenceMeter">
  <strong>Interference:</strong> 
  <div class="bar-container">
    <div id="interferenceBar" class="bar" style="width:12%;"></div>
  </div>
</div>

<a href="universe.html" class="hero-link">
  <section class="hero"></section>
</a>

<main class="wrap">
  <section class="grid">
    <article class="card" data-genre="drum-bass">
      <div class="art"><img src="images/Cartons/Drum & Bass Carton.png" alt="Drum & Bass"></div>
      <div class="meta">
        <div class="title">Drum & Bass</div>
        <div class="sub">Electric — Energy Crew</div>
      </div>
    </article>
    <article class="card" data-genre="house">
      <div class="art"><img src="images/Cartons/House Carton.png" alt="House"></div>
      <div class="meta">
        <div class="title">House</div>
        <div class="sub">Psychic — Club Crew</div>
      </div>
    </article>
    <article class="card" data-genre="lofi">
      <div class="art"><img src="images/Cartons/LO-FI Carton.png" alt="Lo-Fi"></div>
      <div class="meta">
        <div class="title">Lo-Fi</div>
        <div class="sub">Wind — Chilled Crew</div>
      </div>
    </article>
    <article class="card" data-genre="hiphop">
      <div class="art"><img src="images/Cartons/Hip Hop Carton.png" alt="Hip-Hop"></div>
      <div class="meta">
        <div class="title">Hip-Hop</div>
        <div class="sub">Earth — Hip Hop Crew</div>
      </div>
    </article>
    <article class="card" data-genre="afrobeat">
      <div class="art"><img src="images/Cartons/Afrobeat Carton.png" alt="Afrobeat"></div>
      <div class="meta">
        <div class="title">Afrobeat</div>
        <div class="sub">Fire — Afro Crew</div>
      </div>
    </article>
  </section>

  <!-- CYCLING AD BANNER -->
  <section class="ad-banner">
    <h2>SIGNAL BLEED — INTRUSION</h2>
    <div id="adImage"></div>
  </section>

  <!-- JAM SIGNAL BUTTON – centered in page flow -->
  <div class="jam-section">
    <button id="jam-button">JAM SIGNAL</button>
  </div>

  <!-- TRANSMISSION LOG -->
  <div class="trans-log" id="transLog">
    SIGNAL STATUS: LOCKED<br>FREQUENCY: 107.3 MHz (PIRATE)
  </div>

  <!-- PHASE MODULATOR ARTIFACT – clickable image -->
  <section class="phase-artifact">
    <a href="phase-modulator.html">
      <img src="images/Universe/phase_modulator.png" alt="Phase Modulator Artifact">
    </a>
    <p>Artifact detected — Phase Modulator online. Re-establish the signal.</p>
  </section>

    <!-- TRANSMISSION NEWS – cycling bleed-style block -->
  <section class="transmission-news" id="transmissionNews">
    <p>Signal intercepted: 5G towers confirmed as alien observation nodes •</p>
  </section>

  <!-- MLK 500 STOCK INDEX – with header image -->
  <section class="mlk500-section">
    <h2>
      <img src="images/Universe/MLK500-header.png" alt="MLK 500 Index">
    </h2>
    <div class="stock-list" id="stocks-container"></div>
  </section>

  <!-- INVEST BUTTON -->
  <div class="invest-section">
    <button id="invest-button">INVEST IN THE MARKET</button>
    <div id="invest-message"></div>
  </div>

  <!-- SIGNAL BLEED NOTE -->
  <section class="signal-bleed">
    THEY’RE STILL LISTENING<br>
    DO NOT ADJUST YOUR RECEIVER
  </section>
</main>

<div class="crt-overlay"></div>

<!-- JAM OVERLAY – full-screen tiled static, centered text -->
<div id="jam-overlay">
  <div id="jam-text">SIGNAL LOST</div>
</div>

<div id="floating-player">
  <div class="player-meta">
    <div class="player-title">MLKSHK Pirate Radio</div>
    <div class="player-artist">Live Stream</div>
    <div class="player-status" id="status">Ready</div>
  </div>
  <div class="player-controls">
    <img id="playPause" src="Player/PLAY.png" alt="Play/Pause">
  </div>
  <audio id="audio">
    <source src="https://radio.mlkshkdigital.com/stream.mp3" type="audio/mpeg">
  </audio>
</div>

<footer style="text-align:center;">
  MLKSHK — Built for the misfits. © <span id="year"></span>
</footer>

<script>
// Year
document.getElementById('year').textContent = new Date().getFullYear();

// Floating player
const audio = document.getElementById('audio');
const btn = document.getElementById('playPause');
const statusEl = document.getElementById('status');

btn.addEventListener('click', () => {
  if (audio.paused) {
    audio.play().catch(e => {
      console.log("Play failed:", e);
      statusEl.textContent = 'Error – try again';
    });
    btn.src = 'Player/PAUSE.png';
    statusEl.textContent = 'Connecting...';
  } else {
    audio.pause();
    btn.src = 'Player/PLAY.png';
    statusEl.textContent = 'Paused';
  }
});

audio.addEventListener('waiting', () => statusEl.textContent = 'Buffering...');
audio.addEventListener('playing', () => statusEl.textContent = 'Live');
audio.addEventListener('error', () => statusEl.textContent = 'Stream error – retry?');
audio.addEventListener('stalled', () => statusEl.textContent = 'Stalled...');
audio.addEventListener('pause', () => statusEl.textContent = 'Paused');

if ('mediaSession' in navigator) {
  navigator.mediaSession.metadata = new MediaMetadata({
    title: "MLKSHK Pirate Radio",
    artist: "Underground • Live • No Rules",
    album: "MLKSHK Digital",
    artwork: [
      { src: "images/LOGO_SMALL.png", sizes: "96x96", type: "image/png" },
      { src: "images/LOGO_SMALL.png", sizes: "128x128", type: "image/png" },
      { src: "images/LOGO_SMALL.png", sizes: "192x192", type: "image/png" },
      { src: "images/Pirate Radio/pirateradio.png", sizes: "512x512", type: "image/png" }
    ]
  });
  navigator.mediaSession.setActionHandler('play', () => {
    audio.play();
    btn.src = 'Player/PAUSE.png';
    statusEl.textContent = 'Live';
  });
  navigator.mediaSession.setActionHandler('pause', () => {
    audio.pause();
    btn.src = 'Player/PLAY.png';
    statusEl.textContent = 'Paused';
  });
  audio.addEventListener('play', () => navigator.mediaSession.playbackState = 'playing');
  audio.addEventListener('pause', () => navigator.mediaSession.playbackState = 'paused');
}

// Dropdown toggle
const navToggle = document.querySelector('.nav-toggle');
const dropdownMenu = document.querySelector('.dropdown-menu');
navToggle.addEventListener('click', (e) => {
  e.stopPropagation();
  dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
});
document.addEventListener('click', (e) => {
  if (!navToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
    dropdownMenu.style.display = 'none';
  }
});

// Cycle transmission log
const transLog = document.getElementById('transLog');
if (transLog) {
  const messages = [
    "SIGNAL STATUS: LOCKED<br>FREQUENCY: 107.3 MHz (PIRATE)",
    "CARRIER: STABLE — INTERFERENCE LOW<br>GHOSTS DETECTED: 3",
    "LAST PING: 00:00:00 AGO<br>DO NOT ADJUST",
    "THEY’RE STILL LISTENING<br>WAKE UP"
  ];
  let index = 0;
  setInterval(() => {
    transLog.innerHTML = messages[index];
    index = (index + 1) % messages.length;
  }, 8000);
}

// CYCLING AD BANNER
const adImages = [
  "images/Universe/Ads/toejam-toothpaste.jpg",
  "images/Universe/Ads/nobbys-balloon.jpg",
  "images/Universe/Ads/brenda-semtex.jpg",
  "images/Universe/Ads/daves-candles.jpg",
  "images/Universe/Ads/Micks-Rum.jpg",
  "images/Universe/Ads/Sharons-Knickers.jpg",
  "images/Universe/Ads/kevin-hotline.jpg",
];
let adIndex = 0;
const adContainer = document.getElementById('adImage');

function showAd() {
  const imgPath = adImages[adIndex];
  adContainer.innerHTML = `
    <img src="${imgPath}" alt="Ad">
  `;
  adIndex = (adIndex + 1) % adImages.length;
}

showAd();
setInterval(showAd, 10000);

// SIGNAL STRENGTH – bottom-left, quick cycle
const signalStrengthEl = document.getElementById('signalStrength');
const strengthBarEl = document.getElementById('strengthBar');
const strengthMeterEl = document.getElementById('signalStrengthMeter');

let currentStrength = 89;

function updateStrength() {
  currentStrength += Math.floor(Math.random() * 13) - 6;
  currentStrength = Math.max(18, Math.min(98, currentStrength));
  signalStrengthEl.textContent = currentStrength + '%';
  strengthBarEl.style.width = currentStrength + '%';

  if (currentStrength > 70) {
    strengthBarEl.style.background = 'var(--signal-green)';
    strengthMeterEl.className = 'signal-meter';
  } else if (currentStrength > 40) {
    strengthBarEl.style.background = 'var(--signal-yellow)';
    strengthMeterEl.className = 'signal-meter weak';
  } else {
    strengthBarEl.style.background = 'var(--signal-red)';
    strengthMeterEl.className = 'signal-meter critical';
  }
}

updateStrength();
setInterval(updateStrength, Math.random() * 4000 + 3000);

// INTERFERENCE LEVEL – bottom-right, slower cycle
const interferenceBarEl = document.getElementById('interferenceBar');
const interferenceMeterEl = document.getElementById('interferenceMeter');

let currentInterference = 12;

function updateInterference() {
  currentInterference += Math.floor(Math.random() * 17) - 8;
  currentInterference = Math.max(5, Math.min(85, currentInterference));
  interferenceBarEl.style.width = currentInterference + '%';

  if (currentInterference < 30) {
    interferenceBarEl.style.background = 'var(--signal-green)';
    interferenceMeterEl.className = 'signal-meter';
  } else if (currentInterference < 60) {
    interferenceBarEl.style.background = 'var(--signal-yellow)';
    interferenceMeterEl.className = 'signal-meter weak';
  } else {
    interferenceBarEl.style.background = 'var(--signal-red)';
    interferenceMeterEl.className = 'signal-meter critical';
  }
}

updateInterference();
setInterval(updateInterference, Math.random() * 20000 + 15000);

// JAM SIGNAL BUTTON
const jamButton = document.getElementById('jam-button');
const jamOverlay = document.getElementById('jam-overlay');
const jamText = document.getElementById('jam-text');

jamButton.addEventListener('click', () => {
  jamText.style.opacity = '1';
  jamOverlay.style.opacity = '1';
  jamOverlay.style.pointerEvents = 'all';
  document.body.style.animation = 'shake 0.8s infinite';

  const jamAudio = new Audio('Audio/MLKSHK SIGNAL LOST.mp3');
  jamAudio.volume = 0.5;
  jamAudio.play().catch(e => console.log("Audio play failed:", e));

  setTimeout(() => {
    jamOverlay.style.opacity = '0';
    jamOverlay.style.pointerEvents = 'none';
    jamText.style.opacity = '0';
    document.body.style.animation = '';
    transLog.innerHTML = "SIGNAL RESTORED<br>TRANSMISSION RESUMED";
  }, 7000);
});

// MLK 500 STOCK INDEX – 9 items, Coinbase-style
const stocks = [
  { symbol: "BFPD", name: "Barry’s Forgotten Pants Deodorant", price: 23.47, change: 0.9 },
  { symbol: "DDKG", name: "Dirty Dave’s Kebab Grease Candle", price: 8.12, change: -1.4 },
  { symbol: "SSHK", name: "Sharon’s Second Hand Knickers", price: 41.89, change: 2.3 },
  { symbol: "KESB", name: "Kevin’s Emotional Support Brick", price: 19.99, change: -0.5 },
  { symbol: "MRRM", name: "Mick’s Roofie Rum", price: 67.33, change: 3.1 },
  { symbol: "MPRR", name: "Microwave Pizza Roll Roulette", price: 4.77, change: 1.8 },
  { symbol: "NUCB", name: "Nobby’s Used Condom Balloon Animals", price: 0.89, change: 4.2 },
  { symbol: "SLCL", name: "Last Chance Lube", price: 14.20, change: -0.3 },
  { symbol: "TTJT", name: "Trevor’s Toe Jam Toothpaste", price: 9.99, change: -1.1 }
];

function renderStocks() {
  const container = document.getElementById('stocks-container');
  container.innerHTML = '';

  stocks.forEach(stock => {
    const div = document.createElement('div');
    div.className = 'stock-item';

    const isPositive = stock.change >= 0;
    const colorClass = isPositive ? 'positive' : 'negative';
    const arrow = isPositive ? '↑' : '↓';

    div.innerHTML = `
      <div class="stock-left">
        <div class="stock-symbol">${stock.symbol}</div>
        <div class="stock-name">${stock.name}</div>
      </div>
      <div class="stock-right">
        <div class="stock-price">£${stock.price.toFixed(2)}</div>
        <div class="stock-change ${colorClass}">
          ${arrow} ${Math.abs(stock.change)}%
        </div>
      </div>
    `;

    container.appendChild(div);
  });
}

function updateStocks() {
  stocks.forEach(stock => {
    const changePct = (Math.random() * 6 - 3) / 100;
    stock.price *= (1 + changePct);
    stock.price = Math.max(0.01, Number(stock.price.toFixed(2)));
    stock.change = Number((changePct * 100).toFixed(2));
  });

  renderStocks();
  setTimeout(updateStocks, Math.random() * 7000 + 8000);
}

renderStocks();
setTimeout(updateStocks, 8000);

// INVEST BUTTON – cryptic message
const investButton = document.getElementById('invest-button');
const investMessage = document.getElementById('invest-message');

investButton.addEventListener('click', () => {
  investMessage.textContent = "If you know, you know. MLKSHK Universe members only.";
  investMessage.style.opacity = '1';

  setTimeout(() => {
    investMessage.style.opacity = '0';
  }, 4000);
});

// Shake animation
const style = document.createElement('style');
style.innerHTML = `
  @keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-2px, -3px) rotate(-2deg); }
    20% { transform: translate(-4px, 0px) rotate(2deg); }
    30% { transform: translate(4px, 3px) rotate(0deg); }
    40% { transform: translate(2px, -2px) rotate(2deg); }
    50% { transform: translate(-2px, 3px) rotate(-2deg); }
    60% { transform: translate(-4px, 1px) rotate(0deg); }
    70% { transform: translate(4px, 2px) rotate(-2deg); }
    80% { transform: translate(-2px, -2px) rotate(2deg); }
    90% { transform: translate(2px, 3px) rotate(0deg); }
    100% { transform: translate(1px, -3px) rotate(-2deg); }
  }
`;
document.head.appendChild(style);

// Transmission news cycle (replaces old ticker)
const transmissionNews = document.getElementById('transmissionNews');
if (transmissionNews) {
  const newsLines = [
    "Signal intercepted: 5G towers confirmed as alien observation nodes",
    "New directive: Mandatory happiness implants by 2029 – opt-out fee: firstborn",
    "Crypto billionaire renames country to HODLstan",
    "Jungle Prime now delivers regret in under 2 hours",
    "UN declares water a hate crime – it's wet and oppressive",
    "WikWok bans breathing challenges after users achieve permanent enlightenment",
    "Pear Vision Pro adds 'Quiet Crying in Public' filter – sold out instantly"
  ];
  let newsIndex = 0;

  function updateTransmission() {
    transmissionNews.innerHTML = `<p>${newsLines[newsIndex]}</p>`;
    newsIndex = (newsIndex + 1) % newsLines.length;
  }

  updateTransmission();
  setInterval(updateTransmission, 8000); // same cycle as log
}
</script>
</body>
</html>
